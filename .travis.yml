language: cpp

# https://github.com/electron-userland/electron-builder/issues/3559
if: tag IS blank

env:
      # https://github.com/electron-userland/electron-builder/issues/3559
    - TRAVIS_TAG="autotagname"

deploy: &deploy_base
    provider: releases
#    name: ${TRAVIS_TAG}
    tag_name: ${TRAVIS_TAG}
#    target_commitish: master
    body: "    One paragraph only"
    api_key:
        secure: Lz66Pe2XaK9rRjixS1SxWUlnbL3jMXibwtw3F2G9JadgjQFxI61OM5/rxpqMWSR5DtuTU0cHTXakCMJEFhZs0Z4cUYWfdpsFt/3Ftan2yEQJcmnaMv88lJs3WRVNdVm3ZX5mGvxix4Nb5ge6aBeC/3WWdnEUjy1ZNAgl02y+XKQEBjYNQtcpi1MSzi6QfLYoeTL7Lboz3mAmcpQA7qfkb9eRoIdkFR7XCkjOrGIMXABmdTpIWFoHG/+vMnM6PEQuKmwCV0WhCyiWLs/8ZfHp80sCuP9HQok5h1O/lsPErlpRRsho7rotdSCtTZ1GXMYo3LqeYQTxxprlfvWT0YkYldaw17skvy5h+WQKyFA7p+S/qlT66nhpjXQ1czYLYny3m3Fw+UxPW4l4rZtZutrXG66GI9rYvm9YzyfKCSezNjTTvYBGIjlVwjKUK5eKkBoF1VBbapHUu7/c9V4j2mSqcj66Wbe23RBZGnxK3AkYgVasRHhklzK0KD7EGh6mhEB43bY7q9//EJsrXSV320jjGysqHxfyv4Xjc8hIpzplSQPGCNrc1EGa/Ou0L7xEKqJ75P+2w2X3gHwXHFy+yJTiHcQ+b3FoTZYSG5uUIhiCZMEeJILM7tfx4sYelzu2S2aSBXZIJ4TNC9Ulk1eKv0RJ/8od18otVKmgJyyHhP7y79E=
    skip_cleanup: true
    overwrite: true
    draft: true
    prerelease: true
#        on:
#           tags: true

jobs:
  include:
   - name: "Ubuntu"
     os: linux
     dist: bionic
     compiler: gcc
     script:
       - cmake -D CMAKE_BUILD_TYPE=Release . && cmake --build .
       - ls -l ${PWD}
     deploy:
       <<: *deploy_base
       file:
            - Hello
